# ğŸ“˜ Quant Backtesting Framework

A modular, production-grade Python framework for quantitative strategy research, backtesting, performance analysis, and visualization.

This project implements a clean, extensible architecture where strategies, data, backtesting logic, plotting utilities, optimizers, and reports are fully separated â€” making it easy to scale into a full quant research platform.

---

# ğŸ“ Project Structure

```
quant_backtest/
â”‚
â”œâ”€â”€ data/                       # Raw & processed market data
â”‚   â”œâ”€â”€ raw/                    # Original CSV files
â”‚   â””â”€â”€ processed/              # Cleaned/feature-added data
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config.py               # Global configuration (paths, parameters)
â”‚   â”‚
â”‚   â”œâ”€â”€ data/
â”‚   â”‚    â””â”€â”€ loader.py          # Data loading & preprocessing
â”‚   â”‚
â”‚   â”œâ”€â”€ strategies/             # All trading strategies (modular)
â”‚   â”‚    â”œâ”€â”€ ma.py              # Moving Average Crossover Strategy
â”‚   â”‚    â”œâ”€â”€ rsi.py             # (reserved)
â”‚   â”‚    â”œâ”€â”€ macd.py            # (reserved)
â”‚   â”‚    â””â”€â”€ bollinger.py       # (reserved)
â”‚   â”‚
â”‚   â”œâ”€â”€ backtester/
â”‚   â”‚    â”œâ”€â”€ engine.py          # Core vectorized backtest engine
â”‚   â”‚    â”œâ”€â”€ metrics.py         # Risk metrics: Sharpe, MDD, Volatility
â”‚   â”‚    â”œâ”€â”€ cost.py            # Commission, slippage, transaction costs
â”‚   â”‚    â””â”€â”€ trade_log.py       # Trade log generation & PnL tracking
â”‚   â”‚
â”‚   â”œâ”€â”€ optimizer/
â”‚   â”‚    â””â”€â”€ grid_search.py     # Parameter optimization (MA-short/long search)
â”‚   â”‚
â”‚   â”œâ”€â”€ plot/
â”‚   â”‚    â”œâ”€â”€ equity.py          # Equity curve & drawdown visualization
â”‚   â”‚    â”œâ”€â”€ entry_exit.py      # Entry/exit plot with buy/sell markers
â”‚   â”‚    â””â”€â”€ heatmap.py         # Heatmap for parameter search results
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚    â””â”€â”€ helpers.py         # Small helpers & utility functions
â”‚   â”‚
â”‚   â””â”€â”€ report/
â”‚        â””â”€â”€ generator.py       # PDF report generator (optional)
â”‚
â”œâ”€â”€ tests/                      # Unit tests (future work)
â”‚
â””â”€â”€ run_backtest.py             # Main pipeline â€” runs full backtest workflow
```

---

# ğŸš€ Features

### âœ… **1. Data Loading & Preprocessing**

* Clean, unified data loading pipeline (`pandas`)
* Automatically sorts & aligns timestamps
* Ensures strategy-friendly columns (`Open/High/Low/Close/Volume`)

---

### âœ… **2. Modular Strategy Design**

Located in `src/strategies/`

Current implemented strategy:

| Strategy                 | File    | Description                                     |
| ------------------------ | ------- | ----------------------------------------------- |
| Moving Average Crossover | `ma.py` | Generates long/short signals (MA short vs long) |

Reserved strategies (future expansion):

* RSI
* MACD
* Bollinger Bands

---

### âœ… **3. Vectorized Backtest Engine**

Located in `src/backtester/engine.py`

* Uses vectorized pandas syntax (fast)
* Supports:

  * long/short/flat positions
  * order-based transaction costs
  * slippage
  * equity curve computation
* Returns a DataFrame containing:

  * `signal`
  * `position`
  * `strategy_ret`
  * `net_ret`
  * `equity`
  * `trade_cost`

---

### âœ… **4. Risk Metrics**

Located in `src/backtester/metrics.py`:

* **Sharpe Ratio**
* **Max Drawdown (MDD)**
* **Volatility**
* Return sanitization for safety

---

### âœ… **5. Transaction Cost Analysis**

Located in `src/backtester/cost.py`:

Outputs total:

* Commission cost
* Slippage cost
* Number of trades
* Cost per trade
* Cost as % of return

---

### âœ… **6. Trade Log System**

Located in `src/backtester/trade_log.py`

Each trade includes:

* Action (BUY/SELL)
* Timestamp
* Entry/exit price
* PnL
* Position change type (reverse/open/close)

---

### âœ… **7. Parameter Optimization**

Located in `src/optimizer/grid_search.py`

Supports grid search for:

* MA short window
* MA long window

Outputs:

* Best parameters
* DataFrame of all results
* Heatmap visualization

---

### âœ… **8. Visualization**

Located in `src/plot/`

| Plot              | File            | Description                     |
| ----------------- | --------------- | ------------------------------- |
| Equity + Drawdown | `equity.py`     | Equity curve + drawdown subplot |
| Entry/Exit Plot   | `entry_exit.py` | Shows Buy/Sell signals          |
| Heatmap           | `heatmap.py`    | Parameter grid search heatmap   |

All charts are auto-saved to `results/charts/`.

---

### âš¡ **9. Unified Backtest Runner**

`run_backtest.py` executes the full workflow:

1. Load data
2. Apply initial strategy
3. Backtest
4. Compute metrics
5. Generate trade log
6. Save visualization
7. Run optimization
8. Re-run using optimized parameters
9. Save best charts

Clean output & easy read.

---
